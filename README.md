# üß™üî¨ü§ñ –°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è —Ç–∫–∞–Ω–µ–π –Ω–∞ Whole Slide Images (WSI) –∏ FastAPI —Å–µ—Ä–≤–∏—Å –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞

## üìå –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
–¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞ ‚Äî –æ–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ –æ–±–ª–∞—Å—Ç–µ–π, —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö —Ç–∫–∞–Ω—å, –Ω–∞ Whole Slide Images (WSI), –∞ —Ç–∞–∫–∂–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ FastAPI-—Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞ –æ–±—É—á–µ–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏.  
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ–ª–Ω—ã–π pipeline: –æ—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª–µ–π –¥–æ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞ –≤ Docker –∏ –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞.

–ó–∞–º–µ—á–∞–Ω–∏–µ: –ø—É–Ω–∫—Ç—ã 2 –∏ 3 –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã (–∏—Ö –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∑–∞–Ω–æ–≤–æ –æ–±—É—á–∏—Ç—å –º–æ–¥–µ–ª–∏)
---

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
project_root/
‚îú‚îÄ‚îÄ training/                # –ö–æ–¥ –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∏ –æ–±—É—á–µ–Ω–∏—è
‚îú‚îÄ‚îÄ service/                 # FastAPI + Dockerfile
‚îú‚îÄ‚îÄ client.py                # –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç
‚îú‚îÄ‚îÄ configs/                 # –ö–æ–Ω—Ñ–∏–≥–∏
‚îú‚îÄ‚îÄ README.md                # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∑–∞–ø—É—Å–∫—É
‚îî‚îÄ‚îÄ requirements.txt         # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [UV](https://docs.astral.sh/uv/) –∏–ª–∏ `conda`.  
–ü—Ä–∏–º–µ—Ä —É—Å—Ç–∞–≤–Ω–æ–≤–∫–∏ `uv`:
```bash
curl -LsSf https://astral.sh/uv/install.sh | sh
```

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `uv`:
```bash
uv venv
source .venv/bin/activate
uv pip install -r requirements.txt
```

–¢–∞–∫–∂–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —É—Å—Ç–∞–≤–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É QuPath –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ WSI –∏ —Ä–∞–∑–º–µ—Ç–∫–∏


### 2. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
–°–∫–∞—á–∞–π—Ç–µ –¥–∞–Ω–Ω—ã–µ (–±—É–¥—É—Ç –ª–µ–∂–∞—Ç—å –≤ zip —Ñ–∞–π–ª–µ):
- –û—Å–Ω–æ–≤–Ω–æ–π –¥–∞—Ç–∞—Å–µ—Ç (WSI + GeoJSON) 
- –¢–µ—Å—Ç–æ–≤—ã–π –¥–∞—Ç–∞—Å–µ—Ç: [Histo-Seg](https://data.mendeley.com/datasets/vccj8mp2cg/1)

–û—Å–Ω–æ–≤–Ω–æ–π –¥–∞—Ç–∞—Å–µ—Ç:
- –ü–æ–ª–æ–∂–∏—Ç—å —Å–∫–∞—á–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ training/data/raw
- –ò–∑–≤–ª–µ—á—å —Ñ–∞–π–ª—ã —Å –ø–æ–º–æ—â—å—é —É—Ç–∏–ª–∏—Ç—ã extract_zip.py
- –ü–µ—Ä–µ–π—Ç–∏ –≤ ../preprocessed
- –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Å –ø–æ–º–æ—â—å—é —É—Ç–∏–ª–∏—Ç—ã data_preprocess.py

–¢–µ—Å—Ç–æ–≤—ã–π –¥–∞—Ç–∞—Å–µ—Ç:
- –ü–æ–ª–æ–∂–∏—Ç—å —Å–∫–∞—á–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ training/data/test
- –ò–∑–≤–ª–µ—á—å —Ñ–∞–π–ª—ã —Å –ø–æ–º–æ—â—å—é —É—Ç–∏–ª–∏—Ç—ã extract_histo_test.py
- –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Å –ø–æ–º–æ—â—å—é —É—Ç–∏–ª–∏—Ç—ã preprocess.py

### 3.–û–±—É—á–µ–Ω–∏–µ –∏ —Ç–µ—Å—Ç
- –ü–µ—Ä–µ–π—Ç–∏ –≤ training
- –ó–∞–ø—É—Å—Ç–∏—Ç—å —É—Ç–∏–ª–∏—Ç—É train.py –¥–ª—è –æ–±—É—á–µ–Ω–∏—è

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞ –æ–±—É—á–µ–Ω–∏—è:
```bash
uv run train.py model="deeplabv3"
```
- –ó–∞–ø—É—Å—Ç–∏—Ç—å —É—Ç–∏–ª–∏—Ç—É test.py –¥–ª—è —Ç–µ—Å—Ç–∞

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–∞:
```bash
uv run test.py model="deeplabv3"
```


### 4. –ó–∞–ø—É—Å–∫ Fast_API —Å–µ—Ä–≤–∏—Å–∞
–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É —Å–µ—Ä–≤–∏—Å–∞, –µ—Å–ª–∏ –≤—ã –≤—ã–ø–æ–ª–Ω—è–ª–∏ –ø—É–Ω–∫—Ç—ã 2 –∏ 3:
- –ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–æ—Ä–Ω–µ–≤—É—é –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
- –°–æ–±—Ä—Ç–∞—Ç—å –æ–±—Ä–∞–∑ docker 
```bash
docker build -f service/Dockerfile -t semantic-segmentation:latest .
```
- –ó–∞–ø—É—Å—Ç–∏—Ç—å docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
```bash
docker run -d --name semantic-segmentation -p <your port number>:5000 semantic-segmentation:latest
```
- Add port <your port number>



–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É —Å–µ—Ä–≤–∏—Å–∞, –µ—Å–ª–∏ –≤—ã –ù–ï –≤—ã–ø–æ–ª–Ω—è–ª–∏ –ø—É–Ω–∫—Ç—ã 2 –∏ 3:
- –ü–µ—Ä–µ–π—Ç–∏ –≤ training
- –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É models –∏ –ø–µ—Ä–µ–π—Ç–∏ –≤ –Ω–µ—ë
- –ó–∞–≥—Ä—É–∑–∏—Ç—å –æ–±—É—á–µ–Ω–Ω—É—é [unet](https://drive.google.com/file/d/1c_ZwHinynT-qnC12o1-leySzNcZp1Bxa/view?usp=drive_link) –∏ [deeplabv3](https://drive.google.com/file/d/15Bn2ASY_UYJjsZeivyXJmVZvsX2Ch4Bp/view?usp=drive_link)
–î–∞–ª—å—à–µ —Ç–∞–∫–∂–µ –∫–∞–∫ –∏ –≤ –¥—Ä—É–≥–æ–º –≤–∞—Ä–∏–∞–Ω—Ç–µ
- –ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–æ—Ä–Ω–µ–≤—É—é –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
- –°–æ–±—Ä—Ç–∞—Ç—å –æ–±—Ä–∞–∑ docker 
```bash
docker build -f service/Dockerfile -t semantic-segmentation:latest .
```
- –ó–∞–ø—É—Å—Ç–∏—Ç—å docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
```bash
docker run -d --name semantic-segmentation -p <your port number>:5000 semantic-segmentation:latest
```
- Add port <your port number>